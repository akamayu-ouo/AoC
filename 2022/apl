#!/sbin/dyalogscript
indir ← './input'

I ← ⌷⍨∘⊂

FL ← { ⊃⎕NGET ⍵ 1 }

∇ in ← CB
	in ← ⎕SH 'xclip -sel clip -o'
∇

⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝

day1 ← {
	in ← ⍎¨¨(⊂'')(≢¨⊆⊢) ⍵
	⎕←'--------- [day1]'
	⎕←p1 ← ⌈⌿+⌿¨in
	⎕←p2 ← (+⌿ ⊢ I 3↑⍒)+⌿¨in
}

day2 ← {
	⎕io ← 0
	in ← (⊂' ')(∊≠⊆⊢)¨ ⍵
	ct ← (≢⍤⊢⌸ I ⍋∘∪) in
	pt ← ⌽3|-∘.+⍨⍳3
	⎕←'--------- [day2]'
	⎕←p1 ← ct +.× (,3×⊢pt) + (1+9⍴⍳3)
	⎕←p2 ← ct +.× (,1+⊖pt) + (3×9⍴⍳3)
}

day1 FL indir,'/1.in'
day2 FL indir,'/2.in'

⍝ vim: ft=apl
